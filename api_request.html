<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api Request Handling</title>
    <link rel="stylesheet" href="api_request.css">
</head>

<body>
    <div>
        <button id="open_bt" type="button">Open Id</button>
    </div>
    <dialog id="card_modal">
        <div class="card_body">
            <div class="card_img">
                <img id="card_img" src="" alt="">
                <h3 id="follow">Followers</h3>
            </div>
            <div class="card_data">
                <h3 id="name"></h3>
                <p id="details"></p>
            </div>
        </div>
        <button id="close_modal">close</button>
    </dialog>
    <script>
        const requestUrl = 'https://api.github.com/users/CodeWithHarry';
        const Xhr = new XMLHttpRequest();
        Xhr.open('GET', requestUrl);
        Xhr.onreadystatechange = function () {
            console.log(Xhr.readyState);
            if (Xhr.readyState === 4) {

                const data = JSON.parse(this.responseText);
                console.log(typeof data);
                console.log(data.followers);
                const followers = data.followers;
                const imageUrl = data.avatar_url;
                img.src = imageUrl;
                addFollow.textContent = `Followers : ${followers}`;
                const modal_name = data.login;
                api_name.textContent =  `Mr.${modal_name}`;
            }
        }
        Xhr.send();

        const api_name = document.getElementById('name'); 
        const card_head = document.getElementById('card_modal');
        const img = document.getElementById('card_img');
        const addFollow = document.getElementById('follow');
        const open_btn = document.getElementById('open_bt');
        const close_modal_btn = document.getElementById('close_modal');

        open_btn.addEventListener('click', () => {
            card_head.showModal();
        })
        close_modal_btn.addEventListener('click', () => {
            card_head.close();
        })
    </script>
</body>

</html>